@model LitmusWeb.Models.CaneAnalysisModel
@{
    ViewBag.Title = "Add";
    Layout = "~/Views/Shared/_Layout.cshtml";

    DateTime sampleDate, analysisDate, prvSeasonHarvestingDate;
    HttpCookie cookie = HttpContext.Current.Request.Cookies["caneAnalysisCookie"];
    if (cookie != null)
    {
        //sampleDate = DateTime.ParseExact(cookie["sampleDate"].ToString(),"dd-MM-yyyy",System.Globalization.CultureInfo.CurrentCulture);
        //analysisDate = DateTime.ParseExact(cookie["analysisDate"].ToString(), "yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
        sampleDate = Convert.ToDateTime(cookie["sampleDate"].ToString()).Date;
        analysisDate = Convert.ToDateTime(cookie["analysisDate"].ToString()).Date;
        prvSeasonHarvestingDate = Convert.ToDateTime(cookie["prvSeasonHarvestingDate"].ToString()).Date;
    }
    else
    {
        sampleDate = DateTime.Now.Date;
        analysisDate = DateTime.Now.Date;
        prvSeasonHarvestingDate = DateTime.Now.Date;
    }
}
@section styles{
    
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
}
<div class="main-panel">

    <div class="content-wrapper">
        <div class="col-12 grid-margin">
            <div class="card">
                <div class="card-body">
                    @Html.ActionLink("<< Back", "Index", new { }, new { @class = "btn btn-sm btn-rounded btn-primary float-right" })
                    <h4 class="card-title">
                        Pre-Season Cane Analysis
                    </h4>

                    <p class="card-description">
                        List of analysis performed on cane samples.
                    </p>
                    @using (Html.BeginForm("Add", "CaneAnalysis", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group row">
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.SampleDate, new { htmlAttributes = new { @class = "form-control datepicker",  value = @sampleDate} })
                    @Html.LabelFor(@m => m.SampleDate)
                    @Html.ValidationMessageFor(@m => m.SampleDate, "", new { @class = "text-danger" })*@

                                            <input type="text" value="@sampleDate" class="form-control datepicker" name="SampleDate" id="SampleDate" />
                                            <label for="SampleDate">Sample Date</label>
                                            @Html.ValidationMessageFor(@m => m.SampleDate, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.AnalysisDate, new { htmlAttributes = new { @class = "form-control datepicker", @value = analysisDate } })*@
                                            <input type="text" value="@analysisDate" class="form-control datepicker" name="AnalysisDate" id="AnalysisDate" />
                                            @Html.LabelFor(@m => m.AnalysisDate)
                                            @Html.ValidationMessageFor(@m => m.AnalysisDate, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.PreviousSeasonHarvestingDate, new { htmlAttributes = new { @class = "form-control datepicker" } })*@

                                            <input type="text" value="@prvSeasonHarvestingDate" class="form-control datepicker" name="PreviousSeasonHarvestingDate" id="PreviousSeasonHarvestingDate" />
                                            @Html.LabelFor(@m => m.PreviousSeasonHarvestingDate)
                                            @Html.ValidationMessageFor(@m => m.PreviousSeasonHarvestingDate, "", new { @class = "text-danger" })

                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.VillageCode, new { htmlAttributes = new { @class = "form-control", @placeholder = "Village Code" } })
                                            @Html.LabelFor(@m => m.VillageCode)
                                            <span id="villageName"></span>
                                            @Html.ValidationMessageFor(@m => m.VillageCode, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-6">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.GrowerCode, new { htmlAttributes = new { @class = "form-control", @placeholder = "Grower Code" } })
                                            @Html.LabelFor(@m => m.GrowerCode)
                                            <span id="growerName"></span>
                                            @Html.ValidationMessageFor(@m => m.GrowerCode, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.ZoneCode, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code" } })
                    @Html.LabelFor(@m => m.ZoneCode)*@
                                            <select class="form-control" id="ZoneCode" name="ZoneCode">
                                                <option value="0">--Select a Zone--</option>
                                            </select>
                                            @Html.ValidationMessageFor(@m => m.ZoneCode, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.VarietyCode, new { htmlAttributes = new { @class = "form-control", @placeholder = "Variety Code" } })
                                            @Html.LabelFor(@m => m.VarietyCode)
                                            @Html.ValidationMessageFor(@m => m.VarietyCode, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.CaneType, new { htmlAttributes = new { @class = "form-control", @placeholder = "Crop Type" } })
                    @Html.LabelFor(@m => m.CaneType)*@
                                            <select class="form-control" id="CaneType" name="CaneType">
                                                <option value="0">-- Select Crop Type --</option>
                                            </select>
                                            @Html.ValidationMessageFor(@m => m.CaneType, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group row">
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.LandPosition, new { htmlAttributes = new { @class = "form-control", @placeholder = "Variety Code" } })
                    @Html.LabelFor(@m => m.LandPosition)*@
                                            <select class="form-control" id="LandPosition" name="LandPosition">
                                                <option id="0">--Select Land Position--</option>
                                            </select>
                                            @Html.ValidationMessageFor(@m => m.LandPosition, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @*@Html.EditorFor(@m => m.FieldCondition, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code" } })
                    @Html.LabelFor(@m => m.FieldCondition)*@
                                            <select class="form-control" id="FieldCondition" name="FieldCondition">
                                                <option id="0">--Select Land Position--</option>
                                            </select>
                                            @Html.ValidationMessageFor(@m => m.FieldCondition, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-label-group irrigationDays">
                                            @*@Html.EditorFor(@m => m.FieldCondition, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code" } })
                    @Html.LabelFor(@m => m.FieldCondition)*@
                                            <input type="number" id="IrrigatedDays" name="IrrigatedDays" class="form-control disabled" value="0" />
                                            <label for="IrrigatedDays">Irrigated Days</label>
                                            @Html.ValidationMessageFor(@m => m.FieldCondition, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.JuicePercent, new { htmlAttributes = new { @class = "form-control", @placeholder = "Variety Code" } })
                                            @Html.LabelFor(@m => m.JuicePercent)
                                            @Html.ValidationMessageFor(@m => m.JuicePercent, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.Brix, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code" } })
                                            @Html.LabelFor(@m => m.Brix)
                                            @Html.ValidationMessageFor(@m => m.Brix, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.Pol, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code" } })
                                            @Html.LabelFor(@m => m.Pol)
                                            @Html.ValidationMessageFor(@m => m.Pol, "", new { @class = "text-danger" })
                                        </div>
                                    </div>


                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-3">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.Purity, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code", @readonly = true } })
                                            @Html.LabelFor(@m => m.Purity)
                                            @Html.ValidationMessageFor(@m => m.Purity, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.PolInCaneToday, new { htmlAttributes = new { @class = "form-control", @placeholder = "Pol in Cane (Today)", @readonly = true } })
                                            @Html.LabelFor(@m => m.PolInCaneToday)
                                            @Html.ValidationMessageFor(@m => m.PolInCaneToday, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-3">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.RecoveryByWCapToday, new { htmlAttributes = new { @class = "form-control", @placeholder = "Pol in Cane (Today)", @readonly = true } })
                                            @Html.LabelFor(@m => m.RecoveryByWCapToday)
                                            @Html.ValidationMessageFor(@m => m.RecoveryByWCapToday, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-3">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.RecoveryByMolPurityToday, new { htmlAttributes = new { @class = "form-control", @placeholder = "Pol in Cane (Today)", @readonly = true } })
                                            @Html.LabelFor(@m => m.RecoveryByMolPurityToday)
                                            @Html.ValidationMessageFor(@m => m.RecoveryByMolPurityToday, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.MaxTemperature, new { htmlAttributes = new { @class = "form-control", @placeholder = "Zone Code"} })
                                            @Html.LabelFor(@m => m.MaxTemperature)
                                            @Html.ValidationMessageFor(@m => m.MaxTemperature, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.MinTemperature, new { htmlAttributes = new { @class = "form-control", @placeholder = "Pol in Cane (Today)"} })
                                            @Html.LabelFor(@m => m.MinTemperature)
                                            @Html.ValidationMessageFor(@m => m.MinTemperature, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <div class="form-label-group">
                                            @Html.EditorFor(@m => m.Humidity, new { htmlAttributes = new { @class = "form-control", @placeholder = "Pol in Cane (Today)" } })
                                            @Html.LabelFor(@m => m.Humidity)
                                            @Html.ValidationMessageFor(@m => m.Humidity, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>
                                    <button type="submit" id="btnSubmit" name="btnSubmit" class="btn btn-success float-right">Save</button>
                                </div>


                            </div>
                    }
                </div>
            </div>
        </div>
        <link href="~/Content/MainContent/css/floating-labels.css" rel="stylesheet" />
        @section scripts{
            <script type="text/javascript" src="~/Scripts/SugarAnalysisJs/CaneAnalysis.js"></script>
            <script type="text/javascript" src="~/Scripts/Ajax/CaneAnalysisAjax.js"></script>
            <script src="https://code.jquery.com/ui/1.13.0-rc.2/jquery-ui.min.js" integrity="sha256-RQLbEU539dpygNMsBGZlplus6CkitaLy0btTCHcULpI=" crossorigin="anonymous"></script>
            <script>
                let unitCode = '@Session["BaseUnitCode"].ToString()';
                let seasonCode = '@Session["CrushingSeason"].ToString()';
            </script>
        }
