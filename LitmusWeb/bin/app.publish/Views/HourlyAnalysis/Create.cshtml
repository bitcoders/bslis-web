
@model LitmusWeb.Models.CustomModels.HourlyAnalysesViewModel
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            @Html.Partial("_PartialAnalysisDefaultValues")

            <div class="col-12 grid-margin">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">
                            Hourly Analysis
                            @Html.ActionLink("Back To List", "Index", new { }, new { @class = "btn btn-primary btn-sm pull-right", @name = "Create" })
                        </h4>
                    </div>
                    <div class="card-body dashboard-tabs p-0">
                        <ul class="nav nav-tabs px-4 border-left-0 border-top-0 border-right-0" role="tablist" id="hourlyTabs">
                            <li class="nav-item">
                                <a class="nav-link active" id="HourlyData-tab" data-toggle="tab" href="#HourlyData" role="tab" aria-controls="HourlyData" aria-selected="true">Analysis Data</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="MillControlData-tab" data-toggle="tab" href="#MillControlData" role="tab" aria-controls="MillControlData" aria-selected="false">Mill Control Data</a>
                            </li>
                        </ul>
                        @using (Html.BeginForm("Create", "HourlyAnalysis", FormMethod.Post, new { htmlAttributes = new { @class = "form-sample" } }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.Hidden("FormType", "Create");
                            @Html.Hidden("unit_code", Session["BaseUnitCode"]);
                            @Html.Hidden("season_code", Session["CrushingSeason"]);
                            @Html.Hidden("entry_date", Session["EntryDate"]);
                            <div class="tab-content py-0 px-0 border-left-0 border-bottom-0 border-right-0">
                                @{
                                    Html.RenderPartial("~/Views/HourlyAnalysis/_PartialTabOneCreate.cshtml");
                                    Html.RenderPartial("~/Views/HourlyAnalysis/_PartialTabTwoCreate.cshtml");
                                }

                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*<link href="~/Content/MainContent/css/floating-labels.css" rel="stylesheet" />*@
    <script src="~/Scripts/SugarAnalysisJs/HourlyAnalysis-1.4.min.js"></script>
    <script src="~/Scripts/FirebaseMessages/HourlyFirebaseNotification-1.1.min.js"></script>

    @if (Convert.ToInt16(ViewBag.OldMillCapacity) <= 0)
    {
        <script>
            $(".oldMill").hide();
            $(".oldMill").val(0);
            $(".newMill").removeClass("col-md-4");
            $(".newMill").addClass("col-md-9");

            $(document).ready(function () {
                // Event handler for the "Next" anchor tag
                let counter = 0;
                $("#next-link").click(function (e) {
                    counter= counter+1;
                    e.preventDefault();
                    var nextTab = $(".nav-tabs li").eq(counter);
                    if (nextTab.length > 0) {
                        if(nextTab.find("a.nav-link").length > 0){
                            nextTab.find("a.nav-link").tab("show");
                        };
                        
                    }
                });
                $("#prv-link").click(function (e) {
                    counter = counter - 1;
                    e.preventDefault();
                    var nextTab = $(".nav-tabs li").eq(counter);
                    if (nextTab.length > 0) {
                        if (nextTab.find("a.nav-link").length > 0) {
                            nextTab.find("a.nav-link").tab("show");
                        };

                    }
                });
            });
        </script>
        <script src="~/Scripts/Ajax/HourlyAnalysesAjax.js"></script>
    }
